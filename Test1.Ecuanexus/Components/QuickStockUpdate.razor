@using Microsoft.AspNetCore.Components
@using Test1.Ecuanexus.Client.Models

<div class="stock-control">
    <button @onclick="() => UpdateStock(Product.Stock - 1)"
            class="stock-btn decrement"
            disabled="@(Product.Stock <= 0)">
        -
    </button>
    <span class="stock-amount">@Product.Stock</span>
    <button @onclick="() => UpdateStock(Product.Stock + 1)"
            class="stock-btn increment">
        +
    </button>
</div>

@code {
    [Parameter]
    public Product Product { get; set; } = default!;

    [Parameter]
    public EventCallback<(Product Product, int NewStock)> OnStockUpdated { get; set; }

    private async Task UpdateStock(int newStock)
    {
        if (newStock < 0) return;
        await OnStockUpdated.InvokeAsync((Product, newStock));
    }
}